Dynamic of  system:
$$\ddot{x}(t) = \dfrac{T}{M} \cos(\beta(t)),\quad \ddot{y}(t) = \dfrac{T}{M} \sin(\beta(t))$$

Now we define new states:
$$x_1(t) = x(t),\quad x_2(t) = \dot{x_1}(t),\quad x_3(t) = y(t),\quad x_4(t) = \dot{x_3}(t),\quad u(t) = \beta(t)$$
New dynamic of system:
$$a(\vec{x(t)}, u, t) = \begin{bmatrix}
	\dot{x}_1(t)\\
	\dot{x}_2(t)\\
	\dot{x}_3(t)\\
	\dot{x}_4(t)
\end{bmatrix} = \begin{bmatrix}
x_2(t)\\
\dfrac{T}{M} \cos(u(t))\\
x_4(t)\\
\dfrac{T}{M} \sin(u(t))
\end{bmatrix}$$
For minimum time:
$$J = t_f - t_0 = \int_{t_0}^{t_f} dt$$
Hamiltonian matrix:
$$\mathcal{H} =  g(\vec x(t), u(t), t) + {\vec{p}(t)}^Ta(\vec x(t), u(t), t)$$
$$\mathcal{H} = 1 + \begin{bmatrix} 
	p_1(t) & p_2(t) & p_3(t) & p_4(t)
\end{bmatrix} \begin{bmatrix}
x_2(t)\\
\dfrac{T}{M} \cos(u(t))\\
x_4(t)\\
\dfrac{T}{M} \sin(u(t))
\end{bmatrix}$$
\begin{equation} \label{HamiltonianQ2_a}
	\mathcal{H} = 1 + p_1(t)x_2(t) + p_2(t)\dfrac{T}{M}\cos(u(t)) +p_3(t)x_4(t) +p_4(t)\dfrac{T}{M}\sin(u(t))
\end{equation}
Eulerâ€“Lagrange equation:
\begin{align}
	\dot{\vec{x}} &= \dfrac{\partial \mathcal{H} }{\partial \vec{p}} = a(\vec x(t), u(t), t)\\
	\dot{\vec{p}} &= -\dfrac{\partial \mathcal{H} }{\partial \vec{x}} \\
	{\vec{0}} &= \dfrac{\partial \mathcal{H} }{\partial \vec{u}}
\end{align}
Now  we use equation \ref{HamiltonianQ2_a} to solve Euler-Lagrange equation.
\begin{equation}\label{diffpQ2_a}
	\begin{bmatrix}
		\dot{p_1}\\
		\dot{p_2}\\
		\dot{p_3}\\
		\dot{p_4}
	\end{bmatrix} = \begin{bmatrix}
		-\dfrac{\partial \mathcal{H}}{\partial x_1} \\[10 pt]
		-\dfrac{\partial \mathcal{H}}{\partial x_2} \\[10 pt]
		-\dfrac{\partial \mathcal{H}}{\partial x_3} \\[10 pt]
		-\dfrac{\partial \mathcal{H}}{\partial x_4} 
	\end{bmatrix} = \begin{bmatrix}
		0 \\
		-p_1\\
		0\\
		-p_3
	\end{bmatrix}
\end{equation} 
Solution of equation \ref{diffpQ2_a} is:
\begin{equation}\label{SolvepQ2_a}
	\begin{bmatrix}
		p_1(t)\\
		p_2(t)\\
		p_3(t)\\
		p_4(t)
	\end{bmatrix} = \begin{bmatrix}
	C_1\\
	-C_1t+C_2\\
	C_3\\
	-C_3t+C_4
\end{bmatrix} 
\end{equation}
Boundary conditions:
$$t_0 = 0,\quad t_f = \text{free}$$
$$\vec{x}(0) = \begin{bmatrix}
	x_1(0) \\
	x_2(0) \\
	x_3(0) \\
	x_4(0) \\
\end{bmatrix}= \begin{bmatrix}
0 \\
0 \\
0 \\
0 \\
\end{bmatrix}, \quad
\vec{x}(t_f) = \begin{bmatrix}
	x_1(t_f) \\
	x_2(t_f) \\
	x_3(t_f) \\
	x_4(t_f) \\
\end{bmatrix}= \begin{bmatrix}
	\text{Free} \\
	V \\
	D \\
	0 \\
\end{bmatrix}
(D, v \text{ Are known constant})$$
Final time is free so:
$$\left(\mathcal{H} + h_t)\right \vert_{*, t_f} = 0 \to \mathcal{H} \vert_{*, t_f} = 0 $$
Final $x_1$ is free so:
\begin{equation}\label{Solvep_1Q2_a}
	\left.(\dfrac{\partial h}{\partial x_1} - p_1) \right \vert_{*, t_f} = 0 \to p_1(t_f) = 0
\end{equation}
From equation \ref{Solvep_1Q2_a} we can find out that $C_1 = 0$.
